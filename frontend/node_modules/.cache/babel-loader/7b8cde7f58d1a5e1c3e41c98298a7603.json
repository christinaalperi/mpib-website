{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/mpib-website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{db,storage}from'../../base';import{doc,collection,addDoc,deleteDoc}from\"firebase/firestore\";import{Heading,Body,FormElements,DeleteContactsDiv,SubmitButton,Background,Centering}from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateContactForm(){var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),fullname=_useState4[0],setFullname=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),role=_useState8[0],setRole=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),imageUpload=_useState10[0],setImageUpload=_useState10[1];// const [photoURL, setPhotoURL] = useState('')\n// const defaultUserURL = 'https://firebasestorage.googleapis.com/v0/b/myersparkibwebsite-cb3ea.appspot.com/o/contactImages%2Fdefault-user.png?alt=media&token=134b62f2-dfb5-4a2c-b1aa-a98eb80e82a3'\nvar contactsCollection=db.collection(\"contacts\");useEffect(function(){contactsCollection.onSnapshot(function(snapshot){var contactsData=[];snapshot.docs.map(function(doc){contactsData.push({id:doc.id,Name:doc.data().Name,Email:doc.data().Email,Role:doc.data().Role});});setContacts(contactsData);});},[]);// const uploadURL = (url) => {  \n//   console.log(url)\n//   addDoc(collection(db,'contactPhotoURLs'),{\n//       url: url\n//   })\n// }\n// const uploadImage = () => {\n//         if(imageUpload!==null) {\n//           const fileType = imageUpload['type'];\n//           console.log(fileType)\n//           console.log(imageUpload)\n//           const storageRef = storage.ref()\n//           const uploadTask = storageRef.child(`/contactImages/${imageUpload.name}`).put(imageUpload)\n//           uploadTask.on('state_changed', \n//               (snapshot)=>{\n//                   console.log(snapshot)  \n//               }, \n//               (err)=>{\n//                   console.log(err)\n//               }, \n//               ()=>{\n//               storage\n//                   .ref(\"/contactImages\")\n//                   .child(imageUpload.name)\n//                   .getDownloadURL()\n//                   .then((url)=>{\n//                       console.log(`File available at: ${url}`)\n//                       // need to send url to firestore photos collection\n//                       setPhotoURL(url)\n//                       uploadURL(url);\n//                   });\n//           })\n//           }\n//     }\nvar handleOnSubmit=function handleOnSubmit(e){e.preventDefault();contacts.forEach(function(el){if(el.Name!=''&&document.getElementById(el.Name).checked==true){console.log(el.id);deleteDoc(doc(db,\"contacts\",el.id));}});};return/*#__PURE__*/_jsx(Body,{children:/*#__PURE__*/_jsxs(Centering,{children:[/*#__PURE__*/_jsxs(Background,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Add Contact \"}),/*#__PURE__*/_jsxs(FormElements,{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Name: \",/*#__PURE__*/_jsx(\"input\",{id:\"setName\",type:\"text\",value:fullname,onChange:function onChange(e){setFullname(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"input\",{id:\"setEmail\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Role: \",/*#__PURE__*/_jsx(\"input\",{id:\"setRole\",type:\"text\",value:role,onChange:function onChange(e){return setRole(e.target.value);}})]}),/*#__PURE__*/_jsx(SubmitButton,{type:\"submit\",value:\"Submit\",onClick:function onClick(e){e.preventDefault();console.log('button clicked');//uploadImage();\nif(fullname!==''&&email!==''&&role!==''){addDoc(collection(db,\"contacts\"),{Name:fullname,Email:email,Role:role//imgURL: defaultUserURL\n}).then(alert(\"Success\"));}},children:\"Submit\"})]})]}),/*#__PURE__*/_jsxs(Background,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Delete Contact(s)\"}),/*#__PURE__*/_jsxs(DeleteContactsDiv,{children:[/*#__PURE__*/_jsx(\"ul\",{style:{'listStyle':'none'},children:contacts.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{id:item.Name,type:\"checkbox\",name:item.Name,value:item.Name}),item.Name]})},index);})}),/*#__PURE__*/_jsx(SubmitButton,{type:\"submit\",value:\"Submit\",onClick:function onClick(e){return handleOnSubmit(e);},children:\"Submit\"})]})]})]})});}export default UpdateContactForm;","map":{"version":3,"sources":["/Users/admin/Desktop/mpib-website/frontend/src/components/UpdateForm/UpdateContactForm.js"],"names":["React","useState","useEffect","db","storage","doc","collection","addDoc","deleteDoc","Heading","Body","FormElements","DeleteContactsDiv","SubmitButton","Background","Centering","UpdateContactForm","contacts","setContacts","fullname","setFullname","email","setEmail","role","setRole","imageUpload","setImageUpload","contactsCollection","onSnapshot","snapshot","contactsData","docs","map","push","id","Name","data","Email","Role","handleOnSubmit","e","preventDefault","forEach","el","document","getElementById","checked","console","log","target","value","then","alert","item","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { db, storage } from '../../base';\nimport { doc, collection, addDoc, deleteDoc } from \"firebase/firestore\"; \nimport {Heading, Body, FormElements, DeleteContactsDiv, SubmitButton, Background, Centering} from './styles'\n\nfunction UpdateContactForm() {\n\n  const [contacts, setContacts] = useState([{}])\n  const [fullname, setFullname] = useState('');\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState('');\n  const [imageUpload, setImageUpload] = useState(null)\n // const [photoURL, setPhotoURL] = useState('')\n // const defaultUserURL = 'https://firebasestorage.googleapis.com/v0/b/myersparkibwebsite-cb3ea.appspot.com/o/contactImages%2Fdefault-user.png?alt=media&token=134b62f2-dfb5-4a2c-b1aa-a98eb80e82a3'\n  const contactsCollection = db.collection(\"contacts\");\n\n\n\n  useEffect(()=>{\n    contactsCollection.onSnapshot((snapshot)=>{\n      const contactsData = [];\n      snapshot.docs.map((doc)=>{\n        contactsData.push({\n          id: doc.id,\n          Name: doc.data().Name,\n          Email: doc.data().Email,\n          Role: doc.data().Role\n        })\n      })\n      setContacts(contactsData)\n    })\n  },[])\n\n  // const uploadURL = (url) => {  \n  //   console.log(url)\n  //   addDoc(collection(db,'contactPhotoURLs'),{\n  //       url: url\n  //   })\n\n  // }\n  // const uploadImage = () => {\n          \n  //         if(imageUpload!==null) {\n  //           const fileType = imageUpload['type'];\n  //           console.log(fileType)\n  //           console.log(imageUpload)\n  //           const storageRef = storage.ref()\n  //           const uploadTask = storageRef.child(`/contactImages/${imageUpload.name}`).put(imageUpload)\n  //           uploadTask.on('state_changed', \n  //               (snapshot)=>{\n  //                   console.log(snapshot)  \n                    \n  //               }, \n  //               (err)=>{\n  //                   console.log(err)\n  //               }, \n  //               ()=>{\n  //               storage\n  //                   .ref(\"/contactImages\")\n  //                   .child(imageUpload.name)\n  //                   .getDownloadURL()\n  //                   .then((url)=>{\n  //                       console.log(`File available at: ${url}`)\n  //                       // need to send url to firestore photos collection\n  //                       setPhotoURL(url)\n  //                       uploadURL(url);\n  //                   });\n                \n  //           })\n  //           }\n  //     }\n\n  const handleOnSubmit = (e) => {\n    e.preventDefault();\n\n    contacts.forEach((el)=>{\n      if((el.Name!='')&&(document.getElementById(el.Name).checked==true)){\n        console.log(el.id);\n        deleteDoc(doc(db,\"contacts\",el.id));\n      }\n      \n    })\n  }\n\n  return (\n    <Body>\n     <Centering><Background>\n     <Heading>Add Contact </Heading>\n        <FormElements>\n          <label>\n            Name: <input id='setName' type='text' value={fullname} onChange={(e)=>{setFullname(e.target.value)}}/>\n          </label>\n          <label>\n            Email: <input id='setEmail' type='text' value={email} onChange={(e)=>setEmail(e.target.value)}/>\n          </label>\n          <label>\n            Role: <input id='setRole' type='text' value={role} onChange={(e)=>setRole(e.target.value)}/>\n          </label>\n          {/* <label>\n            Photo: <input id='setImg' type='file' onChange={(e)=>setImageUpload(e.target.files[0])}/>\n          </label> */}\n          <SubmitButton type=\"submit\" value=\"Submit\" onClick={(e) => {\n              e.preventDefault();\n              console.log('button clicked')\n              //uploadImage();\n              if((fullname!=='')&&(email!=='')&&(role!=='')) {\n                addDoc(collection(db, \"contacts\"), {\n                  Name: fullname,\n                  Email: email,\n                  Role: role\n                  //imgURL: defaultUserURL\n                  \n                }).then(\n                  alert(\"Success\")\n                )\n                \n               }\n\n            }}>Submit</SubmitButton>\n        </FormElements>\n     </Background>\n       \n        \n\n    \n\n    <Background><Heading>Delete Contact(s)</Heading>\n      <DeleteContactsDiv>\n      <ul style={{'listStyle':'none'}}>\n      {contacts.map((item, index)=>{\n        \n          return(\n            <li key={index}>\n              \n              <label><input id={item.Name} type=\"checkbox\" name={item.Name} value={item.Name}/>{item.Name}</label>\n            </li>\n\n          )\n        })}\n      </ul>\n      <SubmitButton type=\"submit\" value=\"Submit\" onClick={(e)=>handleOnSubmit(e)}>Submit</SubmitButton>\n    \n      </DeleteContactsDiv></Background></Centering>\n      \n      \n      \n\n    \n    </Body>\n    \n  )\n}\n\nexport default UpdateContactForm"]},"metadata":{},"sourceType":"module"}