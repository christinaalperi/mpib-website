{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/mpib-website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{db}from'../../base';import{collection,addDoc,deleteDoc,doc}from\"firebase/firestore\";import{Heading,Body,FormElements,SubmitButton,Background,Centering}from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateLinksForm=function UpdateLinksForm(){var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),links=_useState2[0],setLinks=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newURL=_useState4[0],setNewURL=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newLinkedTo=_useState6[0],setNewLinkedTo=_useState6[1];var linksCollection=db.collection(\"links\");useEffect(function(){linksCollection.onSnapshot(function(snapshot){var data=[];snapshot.docs.map(function(doc){data.push({id:doc.id,url:doc.data().url,linkedTo:doc.data().linkedTo});});setLinks(data);});},[]);var handleOnSubmit=function handleOnSubmit(e){e.preventDefault();// iterate through the checkedState array and looked for the checked indices and then get the id of those items and then deleteDoc\nlinks.forEach(function(el){if(document.getElementById(el.url).checked==true){console.log(el.id);deleteDoc(doc(db,\"links\",el.id));}});};return/*#__PURE__*/_jsx(Body,{children:/*#__PURE__*/_jsxs(Centering,{children:[/*#__PURE__*/_jsxs(Background,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Add Link\"}),/*#__PURE__*/_jsxs(FormElements,{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Link Name: \",/*#__PURE__*/_jsx(\"input\",{id:\"addLinkName\",type:\"text\",onChange:function onChange(e){return setNewLinkedTo(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"URL: \",/*#__PURE__*/_jsx(\"input\",{id:\"addLinkURL\",type:\"text\",onChange:function onChange(e){return setNewURL(e.target.value);}})]}),/*#__PURE__*/_jsx(SubmitButton,{type:\"submit\",value:\"Submit\",onClick:function onClick(e){e.preventDefault();if(newLinkedTo!==''&&newURL!==''){addDoc(collection(db,'links'),{url:newURL,linkedTo:newLinkedTo});document.getElementById('addLinkName').value='';document.getElementById('addLinkURL').value='';}},children:\"Submit\"})]})]}),/*#__PURE__*/_jsxs(Background,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Delete Link\"}),/*#__PURE__*/_jsx(\"ul\",{style:{'listStyle':'none'},children:links.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{id:item.url,type:\"checkbox\",name:item.linkedTo,value:item.linkedTo}),item.linkedTo]})},index);})}),/*#__PURE__*/_jsx(SubmitButton,{type:\"submit\",value:\"Submit\",onClick:function onClick(e){return handleOnSubmit(e);},children:\"Submit\"})]})]})});};export default UpdateLinksForm;","map":{"version":3,"sources":["/Users/admin/Desktop/mpib-website/frontend/src/components/UpdateForm/UpdateLinksForm.js"],"names":["React","useState","useEffect","db","collection","addDoc","deleteDoc","doc","Heading","Body","FormElements","SubmitButton","Background","Centering","UpdateLinksForm","links","setLinks","newURL","setNewURL","newLinkedTo","setNewLinkedTo","linksCollection","onSnapshot","snapshot","data","docs","map","push","id","url","linkedTo","handleOnSubmit","e","preventDefault","forEach","el","document","getElementById","checked","console","log","target","value","item","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport { db } from '../../base';\nimport { collection, addDoc, deleteDoc, doc } from \"firebase/firestore\"; \nimport { Heading, Body, FormElements, SubmitButton, Background, Centering } from './styles'\n\nconst UpdateLinksForm = () => {\n  const [links, setLinks] = useState([{}]);\n  const [newURL, setNewURL] = useState('')\n  const [newLinkedTo, setNewLinkedTo] = useState('')\n  const linksCollection = db.collection(\"links\")\n  useEffect(()=>{\n    linksCollection.onSnapshot((snapshot)=>{\n      const data=[]\n      snapshot.docs.map((doc)=>{\n        data.push({\n          id: doc.id,\n          url: doc.data().url,\n          linkedTo: doc.data().linkedTo\n        })\n      })\n      setLinks(data);\n    })\n  },[]);\n\n  const handleOnSubmit = (e) => {\n    e.preventDefault();\n    // iterate through the checkedState array and looked for the checked indices and then get the id of those items and then deleteDoc\n\n    links.forEach((el)=>{\n      if(document.getElementById(el.url).checked==true){\n        console.log(el.id);\n        deleteDoc(doc(db,\"links\",el.id));\n      }\n      \n    })\n}\n\n  return (\n    <Body>\n      <Centering>\n        <Background>\n          <Heading>Add Link</Heading>\n          <FormElements>\n            <label>\n              Link Name: <input id=\"addLinkName\" type='text' onChange={(e)=>setNewLinkedTo(e.target.value)}></input>\n            </label>\n            <label>\n              URL: <input id=\"addLinkURL\" type='text' onChange={(e)=>setNewURL(e.target.value)}/>\n            </label>\n            <SubmitButton type='submit' value=\"Submit\" onClick={(e)=>{\n              e.preventDefault();\n              if(newLinkedTo!=='' && newURL !=='') {\n                addDoc(collection(db, 'links'), {\n                  url: newURL, \n                  linkedTo: newLinkedTo\n              })\n              document.getElementById('addLinkName').value=''\n              document.getElementById('addLinkURL').value=''\n              }\n            }}>Submit</SubmitButton>\n          </FormElements>\n        </Background>\n\n\n        <Background>\n          <Heading>Delete Link</Heading>\n          <ul style={{'listStyle':'none'}}>\n      {links.map((item, index)=>{\n        \n          return(\n            <li key={index}>\n              \n              <label><input id={item.url} type=\"checkbox\" name={item.linkedTo} value={item.linkedTo}/>{item.linkedTo}</label>\n            </li>\n\n          )\n        })}\n      </ul>\n      <SubmitButton type=\"submit\" value=\"Submit\" onClick={(e)=>handleOnSubmit(e)}>Submit</SubmitButton>\n        </Background>\n      </Centering>\n\n\n      \n    </Body>\n  )\n}\n\nexport default UpdateLinksForm"]},"metadata":{},"sourceType":"module"}